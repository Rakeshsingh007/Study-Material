if (self.CavalryLogger) { CavalryLogger.start_js(["omZi32f"]); }

__d("CometHomeContactAndGroupListItems_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]},c={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d={kind:"Literal",name:"height",value:36},e={kind:"Literal",name:"width",value:36},f=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"count"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"CometHomeContactAndGroupListItems_viewer",selections:[{alias:null,args:[{kind:"Variable",name:"count",variableName:"count"}],concreteType:null,kind:"LinkedField",name:"chat_sidebar_contacts",plural:!0,selections:[a,{kind:"InlineFragment",selections:[b],type:"User",abstractKey:null},{args:null,kind:"FragmentSpread",name:"MWChatContact_profile"}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"last",value:20}],concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"updated_time",storageKey:null},{alias:null,args:null,concreteType:"MessageThreadCustomization",kind:"LinkedField",name:"customization_info",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadParticipantCustomization",kind:"LinkedField",name:"participant_customizations",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"participant_id",storageKey:null}],storageKey:null}],storageKey:null},c,{alias:null,args:[d,e],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:f,storageKey:"image(height:36,width:36)"},{alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"all_participants",plural:!1,selections:[{alias:null,args:null,concreteType:"AllMessagingParticipantsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[a,c,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"messenger_read_l30",storageKey:null},b],type:"User",abstractKey:null},{alias:null,args:[d,{kind:"Variable",name:"scale",variableName:"scale"},e],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:f,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"message_threads(last:20)"},{args:null,kind:"FragmentSpread",name:"MWChatContact_viewer"}],type:"Viewer",abstractKey:null}}();e.exports=a}),null);
__d("CometHomeContactAndGroupListItems.react",["CometHomeContactAndGroupListItems_viewer.graphql","CometHomeContactGroup.react","CometHomeContactsConfig","CometHovercardGroup.react","CometHovercardQueryRenderer.entrypoint","CometRelay","FBLogger","MWChatContact.react","MWChatFilterContacts","MWUIThreadTitle.re","emptyFunction","qex","react","useActorHovercardContext"],(function(a,b,c,d,e,f){"use strict";var g,h,i=h||b("react"),j=24*60*60,k=i.memo(function(a){var c=a.filteredContacts,d=a.openTabForUser,e=a.viewer,f=b("useActorHovercardContext")();return i.jsx(b("CometHovercardGroup.react").Group,{children:c.map(function(a){var c;return i.jsx("li",{children:i.jsx(b("CometHovercardGroup.react").Child,{entryPoint:b("CometHovercardQueryRenderer.entrypoint"),entryPointParams:{actorID:(c=a.id)!=null?c:"",context:f},otherProps:{onClose:b("emptyFunction"),visualStyle:"without_action_bar"},position:"start",children:function(c){return i.jsx("div",{ref:c,children:i.jsx(b("MWChatContact.react"),{lsEntryPoint:"sidebarContactsList",openTabForUser:d,profile:a,viewer:e})})}})},a.id)})})},function(a,b){return b.preventReordering});function l(a,c,d,e,f){return a.map(function(a){var g,h;a=a==null?void 0:a.node;if(a==null||((g=a.thread_key)==null?void 0:g.thread_fbid)==null||a.thread_type!=="GROUP")return null;var k=a.thread_key.thread_fbid;g=(g=(g=a.all_participants)==null?void 0:g.edges)!=null?g:[];if(d!==0&&g.length>=d)return null;h=new Date().getTime()/1e3-((h=a.updated_time)!=null?h:0);if(e!==0&&h>j*e)return null;if(f!==0){h=!1;for(var l=0;l<g.length;l++){var m;m=(m=(m=g[l].node)==null?void 0:(m=m.messaging_actor)==null?void 0:m.messenger_read_l30)!=null?m:30;m<f&&(h=!0)}if(!h)return null}m=!1;l=Object.fromEntries(g.map(function(a){var c;a=(a=a.node)==null?void 0:a.messaging_actor;if((a==null?void 0:a.id)==null||(a==null?void 0:a.name)==null||((c=a.profile_picture)==null?void 0:c.uri)==null){b("FBLogger")("up_rank_groups_in_contacts_list").mustfix("Participants get null value in thread: %s",k);return null}c=a.id;a.availability==="ACTIVE"&&(m=!0);return[c,{id:c,name:a.name,short_name:(c=a.short_name)!=null?c:a.name}]}).filter(Boolean));h=Object.fromEntries(g.map(function(a){var c;a=(a=a.node)==null?void 0:a.messaging_actor;if((a==null?void 0:a.id)==null||(a==null?void 0:a.name)==null||((c=a.profile_picture)==null?void 0:c.uri)==null){b("FBLogger")("up_rank_groups_in_contacts_list").mustfix("Participants get null value in thread: %s",k);return null}return[a.id,{image_src:a.profile_picture.uri}]}).filter(Boolean));g=(g=(g=a.customization_info)==null?void 0:g.participant_customizations)!=null?g:[];g=Object.fromEntries(g.map(function(a){return a==null||a.participant_id==null||a.nickname==null?null:[a.participant_id,a.nickname]}).filter(Boolean));l=b("MWUIThreadTitle.re").getTitleForGroup_({nicknames:g,participants:l,threadName:(g=a.name)!=null?g:""});h=b("MWUIThreadTitle.re").getProfileImages_({participants:h,threadImage:(g=a.image)==null?void 0:g.uri});return i.jsx("li",{children:i.jsx(b("CometHomeContactGroup.react"),{activeStatusOn:c,images:h,isThreadActive:m,lastActiveTime:a.updated_time,name:l,threadID:k})},k)}).filter(Boolean)}function a(a){var c,d,e,f,h,j,m,n=a.activeStatusOn,o=a.openTabForUser,p=a.preventReordering;a=a.viewer$key;var q=[],r=b("CometHomeContactsConfig").numContactsToFetch;a=b("CometRelay").useFragment(g!==void 0?g:g=b("CometHomeContactAndGroupListItems_viewer.graphql"),a);c=(c=a==null?void 0:a.chat_sidebar_contacts)!=null?c:[];c=b("MWChatFilterContacts").filter(c);c=c.filteredContacts;d=(d=a==null?void 0:(d=a.message_threads)==null?void 0:d.edges)!=null?d:[];e=(e=b("qex")._("119"))!=null?e:0;f=(f=b("qex")._("122"))!=null?f:0;h=(h=b("qex")._("137"))!=null?h:0;j=(j=b("qex")._("120"))!=null?j:4;m=(m=b("qex")._("121"))!=null?m:3;d=l(d,n,e,f,h);n=Math.min(Math.floor(r/j),m,d.length);for(var e=0;e<n;e++)q=q.concat(i.jsx("div",{children:i.jsx(k,{filteredContacts:c.slice(e*j,(e+1)*j),openTabForUser:o,preventReordering:p,viewer:a})},e)),q=q.concat(d.slice(e,e+1));q=q.concat(i.jsx("div",{children:i.jsx(k,{filteredContacts:c.slice(n*j,r),openTabForUser:o,preventReordering:p,viewer:a})},n));q=q.concat(d.slice(n,m));return i.jsx("div",{children:q})}c=i.memo(a,function(a,b){return b.preventReordering});d=c;e.exports=d}),null);